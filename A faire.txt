1-Planning + recommandations 
Details:




2-Export PDF plat du jour
Details:





3-composant le plus utilises (filtre par periode et type)
Details:






4-Plats crees depuis une date
Details:



Cahier des charges d√©taill√© par fonctionnalit√©
üß© 1. Planning + recommandations
üîç Objectif :

G√©n√©rer automatiquement un planning de plats √† produire (par jour/semaine) selon le stock actuel, les commandes pr√©vues et la conservation des composants.
üì• Entr√©es :

    Date du jour (ou p√©riode)

    Stock actuel (stock.qtte_stock)

    Recettes des plats (details_plat)

    Conservation des composants (stock.nombre_jour_conservation)

    Commandes pr√©vues (commandes.date_heure_prevue)

üì§ Sorties :

    Liste des plats √† pr√©parer

    Quantit√© recommand√©e pour chaque plat

    Ingr√©dients n√©cessaires et leur quantit√© totale

    Avertissements si stock insuffisant ou proche de p√©remption

üß† R√®gles de recommandation :

    Prioriser les composants proches de leur date de p√©remption

    Ne pas d√©passer le stock disponible

    √âviter de proposer des plats impossibles √† faire (si ingr√©dient manquant)

üñ•Ô∏è Interface attendue :

    Un planning visuel (type tableau ou calendrier)

    Un bouton ‚ÄúG√©n√©rer planning‚Äù

    Une alerte si manque d‚Äôingr√©dients

    Filtres : par jour, par plat, par stock dispo

üìÑ 2. Export PDF plat du jour
üîç Objectif :

Exporter la liste des plats planifi√©s pour aujourd‚Äôhui sous forme de PDF, avec d√©tails (ingr√©dients, quantit√©s, co√ªt).
üì• Entr√©es :

    Date du jour (ou date s√©lectionn√©e)

    Planning g√©n√©r√© pr√©c√©demment

üì§ Sorties :

    Fichier PDF contenant :

        Nom du plat

        Quantit√© √† pr√©parer

        Ingr√©dients et quantit√© n√©cessaires

        Co√ªt estim√© (si possible)

üìö Technologie :

    Librairie type iText (Java) ou DomPDF (PHP) ou jsPDF (JS)

üñ•Ô∏è Interface attendue :

    Un bouton "Exporter PDF"

    Aper√ßu du PDF (optionnel)

    T√©l√©chargement du fichier

üìä 3. Ingr√©dients les plus utilis√©s (filtre par p√©riode et type)
üîç Objectif :

Afficher un classement des composants les plus utilis√©s dans la fabrication des plats pendant une p√©riode donn√©e.
üì• Entr√©es :

    P√©riode : date d√©but / date fin

    Type de composant (type_composant)

    Recettes (details_plat)

    Historique commandes (detail_commande, commandes)

üì§ Sorties :

    Tableau ou graphique :

        Nom du composant

        Quantit√© totale utilis√©e

    Possibilit√© de trier par :

        Quantit√© utilis√©e

        Type

        Date

üß† Calcul :

SELECT c.nom, SUM(dp.quantite * dc.quantite) AS total_utilise
FROM detail_commande dc
JOIN plat p ON dc.id_plat = p.id
JOIN details_plat dp ON dp.id_plat = p.id
JOIN composant c ON dp.id_composant = c.id
JOIN commandes co ON co.id = dc.id_commande
WHERE co.date_heure_prevue BETWEEN :date_debut AND :date_fin
GROUP BY c.nom
ORDER BY total_utilise DESC;

üÜï 4. Plats cr√©√©s depuis une date
üîç Objectif :

Lister tous les plats cr√©√©s (ou ajout√©s dans la BDD) depuis une date donn√©e.
üì• Entr√©e :

    Date √† partir de laquelle on veut voir les plats (plat.date_creation)

üì§ Sorties :

    Liste de plats :

        ID, Nom, Prix

        Date cr√©ation

    Nombre total de plats ajout√©s

SQL :

SELECT * FROM plat
WHERE date_creation >= :date_donnee;

üìã R√©sum√© sous forme de tableau
Fonctionnalit√©	Entr√©es	Sorties	Interface	Requ√™tes SQL ou r√®gles m√©tier
Planning plats	Date, stock, commandes	Plats du jour, composants n√©cessaires	Planning + alertes	Stock vs besoin, p√©remption
Export PDF	Date	PDF	Bouton d‚Äôexport	D√©tail planning + lib PDF
Top ingr√©dients	P√©riode, type	Liste ingr√©dients, quantit√©s	Tableau ou graphique	Jointures entre recettes, commandes
Plats r√©cents	Date








Objectif global

Cr√©er un syst√®me de gestion de menu de cantine pour entreprise, avec :

    Suggestion automatique de plats faisables (recommandation)

    S√©lection manuelle de 2 plats par jour sur une semaine

    Export Excel du planning hebdomadaire ‚Üí envoy√© au client

    Le client retourne l‚ÄôExcel avec les quantit√©s par plat

    Tu importes l‚ÄôExcel retourn√© dans l'application

    Tu valides ensuite le planning de production final

    Tu sais quels ingr√©dients pr√©parer, pour combien de plats, par jour

üîÅ √âtapes pr√©cises du processus m√©tier
√âtape	Description	Donn√©es cl√©s
1. G√©n√©ration des recommandations	Le syst√®me propose une liste de plats faisables, en analysant les stocks, p√©remptions, historique, etc.	Tables : plat, details_plat, stock, mvt_stock
2. Planification manuelle	L‚Äôutilisateur choisit 2 plats/jour dans un calendrier visuel (semainier) en cliquant sur les plats recommand√©s.	Nouvelle table : planning_journalier
3. Export Excel	Le planning valid√© est export√© (.xlsx) avec les colonnes : jour, plat 1, plat 2. Ce fichier est envoy√© au client.	
4. Import du fichier retourn√©	Le client remplit dans l'Excel les quantit√©s par plat/jour. Tu importes ensuite ce fichier dans ton syst√®me.	Nouvelle table : commande_recue
5. G√©n√©ration du planning cuisine	Le syst√®me recalcule les quantit√©s totales et les ingr√©dients n√©cessaires, et indique les alertes de stock.	
6. Validation finale	L‚Äôutilisateur valide d√©finitivement le planning de production journalier, toujours dans le calendrier.	Affichage interactif + statut valid√© ‚úÖ
üì¶ Tables suppl√©mentaires √† ajouter

-- Pour stocker le planning pr√©visionnel par jour
CREATE TABLE planning_journalier (
    id SERIAL PRIMARY KEY,
    date_jour DATE NOT NULL UNIQUE,
    id_plat_1 INTEGER REFERENCES plat(id),
    id_plat_2 INTEGER REFERENCES plat(id)
);

-- Pour stocker les quantit√©s command√©es par jour apr√®s retour du client
CREATE TABLE commande_recue (
    id SERIAL PRIMARY KEY,
    date_jour DATE NOT NULL,
    id_plat INTEGER REFERENCES plat(id),
    quantite_commande INTEGER
);

üñ•Ô∏è Interface attendue (UX)
Vue	Action
Calendrier de planification	Affiche chaque jour de la semaine avec 2 slots ‚Üí l‚Äôutilisateur choisit les plats √† l‚Äôaide d‚Äôun menu d√©roulant ou d‚Äôun glisser-d√©poser
Zone de recommandations	Liste les plats faisables (avec disponibilit√© en stock + couleur pour p√©remption proche)
Export Excel	Bouton "Exporter le planning (.xlsx)" une fois la semaine remplie
Import Excel client	Upload d‚Äôun fichier .xlsx contenant les quantit√©s command√©es par jour/plat
Vue planning cuisine	Calendrier avec plats + quantit√©s finales (affich√© avec les totaux ingr√©dients n√©cessaires)
üß† Exemple de Fichier Excel √† Exporter et √† Importer
Format Excel envoy√© :
Date	Plat 1	Plat 2
01/07/2025	Riz Cantonnais	Poulet Grill√©
02/07/2025	Lasagnes	Poisson Curry
‚Ä¶	‚Ä¶	‚Ä¶
Format Excel retourn√© par l‚Äôentreprise :
Date	Plat	Quantit√© Command√©e
01/07/2025	Riz Cantonnais	45
01/07/2025	Poulet Grill√©	50
02/07/2025	Lasagnes	35
02/07/2025	Poisson Curry	38














Objectif global :

ajouter ces fonctionnalite :

    G√©rer le menu journalier / hebdomadaire de la cantine

    Proposer automatiquement des plats selon les stocks et p√©remptions

    Permettre la validation manuelle du planning via une interface visuelle (calendrier)

    Exporter le planning vers l‚Äôentreprise cliente

    Importer les commandes r√©elles de l‚Äôentreprise

    G√©n√©rer un planning de production pr√©cis

    Assurer le suivi des stocks et des besoins en ingr√©dients

    Offrir une architecture configurable, scalable et maintenable

üîÅ Cycle de vie fonctionnel (Workflow complet)
√âtape	Description	Acteur	Technologies
1. Pr√©paration automatique	Le syst√®me sugg√®re des plats r√©alisables selon le stock actuel, la p√©remption et l‚Äôhistorique	Serveur	Requ√™tes PostGres + Service Recommandation
2. Planification manuelle	L‚Äôadmin s√©lectionne n plats/jour via un calendrier interactif (planning pr√©visionnel)	Gestionnaire cantine	FullCalendar.js + Vue/React
3. Export planning (.xlsx)	Le planning est export√© vers un fichier Excel professionnel pour envoi au client entreprise	Syst√®me	Apache POI / PHPSpreadsheet
4. Import retour (.xlsx)	Le client retourne un Excel rempli avec les quantit√©s de commande. Le syst√®me l‚Äôint√®gre	Gestionnaire cantine	Import XLSX backend
5. G√©n√©ration du planning production	Le syst√®me recalcule les besoins r√©els en ingr√©dients et affiche les alertes stock/p√©remption	Syst√®me	PostGres + Service de calcul
6. Validation finale	L‚Äôadmin valide la production quotidienne √† faire avec tous les ingr√©dients calcul√©s	Gestionnaire cantine	Interface web planning final
7. Suivi & historique	Toutes les op√©rations sont historis√©es pour analyse future (quantit√©, consommation, planning)	Syst√®me	Audit + stockage relationnel